<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.14.4/firebase-database.js"></script>

  <meta charset="UTF-8">

  <link href="css/style.css" rel="stylesheet" type="text/css" media="screen">

  <!--    Scripts -->

  <script src="js/Vertex.js"> </script>
  <script src="js/Edge.js"> </script>
  <script src="js/Graph.js"> </script>
  <script src="js/student.js" defer> </script>
  <script src="js/handlers.js"></script>
  <script src="js/PriorityQueue.js"> </script>
  <script src="js/ColMarker.js"> </script>
  <script src="js/MWSTMarker.js"> </script>
  <script src="js/dfsChecker.js"> </script>
  <script src="js/ShortestPathMarker.js"> </script>
  <script src="js/Marker.js"> </script>
  <script src="js/FileSaver.js"></script>

  <script>
    let canvas; // The canvas that is used as the drawing surface
    let graphics; // The 2D graphics context for drawing on the canvas.

    //Variables used for database
    let firebaseConfig;
    let database;
    let ref;

    const X_LEFT = 0;    // The xy limits for the coordinate system.
    const X_RIGHT = 550;
    const Y_BOTTOM = 450;
    const Y_TOP = 0;

    let pixelSize; // The size of one pixel, in the transformed coordinates.

    //Initialize database
    // function initialiseDB() {
    //   firebaseConfig = {
    //     apiKey: "AIzaSyDbsB3C3vb4clAB9iQJT4j8r-sr-UsaGcU",
    //     authDomain: "graphmarker.firebaseapp.com",
    //     databaseURL: "https://graphmarker.firebaseio.com",
    //     projectId: "graphmarker",
    //     storageBucket: "graphmarker.appspot.com",
    //     messagingSenderId: "980362787898",
    //     appId: "1:980362787898:web:f3e18e93bf4505e4c3c903",
    //   };
    //   // Initialize Firebase
    //   firebase.initializeApp(firebaseConfig);
    //
    //   database = firebase.database();
    //   ref = database.ref("scores");
    // }

    function init() {
      try {
        canvas = document.getElementById("canvas");
        graphics = canvas.getContext("2d");

        applyLimits(graphics, X_LEFT, X_RIGHT, Y_TOP, Y_BOTTOM, false);
        graphics.lineWidth = pixelSize;  // Use 1 pixel as the default line width
        graphics.font = "15px Aldrich";
        graphics.textAlign = "center";

        addGraphicsContextExtras(graphics);
        // initialiseDB();
        installMouseHandler();

        addBindings();

        setupInterface();

      } catch (e) {
        document.getElementById("canvas").innerHTML =
          "Canvas graphics is not supported.<br>" +
          "An error occurred while initializing graphics.";
      }
    }
  </script>
</head>

<body onload="init()" style="background-color:#EEEEEE" id="body" oncontextmenu="return false">
  <div id="studentDiv" class="row">

    <!--        Canvas - 1st column-->
    <div id="canvasDiv">
      <h1>Graph Generator</h1>

      <canvas id="canvas" width="550" height="450">
        <!-- This message is shown on the page if the browser doesn't support the canvas element. -->
        Canvas not supported.
      </canvas>
    </div>

    <!--        Vertex stuff - 2nd column-->
    <div id="vertexDiv">

      <!--        Question setup-->
      <div id="questionSetupDiv">
        <h3>Question setup:</h3>

<!--        <label id="fileSelectionLabel">Upload file:</label>-->
<!--        <br>-->

        <input type="file" accept=".txt" id="fileSelection" style="width: 20vw">

        <label id="questionTypeLabel">Question Type:</label>
        <label id="questionDetailsLabel">Details:</label>

        <button id="loadGraphButton">Load Graph</button>
      </div>

      <!--        Editing root vertex-->
      <div id="editRootDiv">

        <h3>Edit root:</h3>

        <label id="setRootDDLabel">Set Root:</label>
        <select id="setRootDD">
          <option>Choose root vertex</option>
        </select>
        <button id="setRootButton">Set Root</button>

        <button id="clearRootButton">Clear Root</button>

      </div>

      <!--        Editing vertices (colors)-->
      <div id="editVertexDiv">
        <h3>Edit color:</h3>

        <label id="editVertexDDLabel">Vertex:</label>
        <select id="editVertexDD">
          <option>Choose vertex to edit</option>
        </select>
        <br>

        <label id="editvertexValueLabel">Value:</label>
        <br>

        <label id="editvertexColorLabel">Color:</label>
        <input type="number" id="editvertexColor">
        <br>

<!--        <label id="editdistFromRootLabel">Distance:</label>-->
<!--        <input type="text" id="editdistFromRoot">-->
<!--        <br>-->

        <button id="updateVertexButton">Update vertex</button>
      </div>


    </div>

    <!--        Edge stuff - 3rd column-->
    <div id="edgeDiv">

      <!--     Add edge-->
      <div id="addEdgeDiv">
        <h3>Add edge:</h3>

        <label id="addEdgeDDLabel">Edge:</label>
        <select id="addEdgeDD">
          <option>Choose edge to add</option>
        </select>
        <br>

        <button id="addEdgeButton">Add edge</button>
        <button id="drawEdgesButton">Draw all edges</button>
      </div>

      <br><br>

      <!--    Delete edge-->
      <div id="deleteEdgeDiv">
        <h3>Delete edge:</h3>

        <label id="deleteEdgeDDLabel">Edge:</label>
        <select id="deleteEdgeDD">
          <option>Choose edge to delete</option>
        </select>
        <br>

        <button id="deleteEdgeButton">Delete edge</button>
      </div>

      <br><br><br>

      <!--            Submit Button-->
      <button style="height:10vh" , id="checkButton" >Check</button>

      <!--            Download Button-->
      <button style="height:10vh" , id="downloadButton">Download</button>

    </div>
  </div>


  <noscript>
    <!-- This message will be shown in the page if JavaScript is not available. -->
    <p>JavaScript is required to use this page.</p>
  </noscript>

</body>

</html>
